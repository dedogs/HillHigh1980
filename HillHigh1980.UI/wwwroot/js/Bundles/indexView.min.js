var GScope;(function(n){var t;(function(t){var i=function(){function t(){var i=this,r;this.filter=function(){var u=i.mapped[t.ElementIds.SortBy].value,f=i.mapped[t.ElementIds.SearchBy].value,r=new n.Entity.Filter(f==="searchFirst"?n.Entity.Filter.Name.FirstName:n.Entity.Filter.Name.LastName,u==="sortFirst"?n.Entity.Filter.Name.FirstName:n.Entity.Filter.Name.LastName);return r.Value=i.mapped[t.ElementIds.RosterSearch].value,r};this.sortBy=function(n){i.submitSearch(n)};this.submitSearch=function(){var n=i.filter();alert("do search");i._service.FindRostersByName(n).then(function(n){alert("done");i.mapped[t.ElementIds.ShowRoster].innerHTML=n}).catch(function(){})};this._service=new n.ApplicationService.Service.RosterService(new n.Infrastructure.RosterRepository);this.mapped=function(){return n.Module.MappedIds.get([{key:t.ElementIds.RosterSearch,value:t.ElementIds.RosterSearch},{key:t.ElementIds.SearchBy,value:t.ElementIds.SearchBy},{key:t.ElementIds.SortBy,value:t.ElementIds.SortBy},{key:t.ElementIds.SubmitSearch,value:t.ElementIds.SubmitSearch},{key:t.ElementIds.ShowRoster,value:t.ElementIds.ShowRoster}])}();r=[new n.Module.EventManager.EventAction(t.ElementIds.SubmitSearch,this.mapped[t.ElementIds.SubmitSearch],"click"),new n.Module.EventManager.EventAction(t.ElementIds.SortBy,this.mapped[t.ElementIds.SortBy],"change")];this.manager=new n.Module.EventManager(this);this.manager.add(r);this.manager.attach()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}();t.IndexView=i,function(n){var t;(function(n){n.SearchBy="searchBy";n.SortBy="sortBy";n.RosterSearch="rosterSearch";n.SubmitSearch="submitSearch";n.ShowRoster="showRoster"})(t=n.ElementIds||(n.ElementIds={}))}(i=t.IndexView||(t.IndexView={}))})(t=n.Page||(n.Page={}))})(GScope||(GScope={}));GScope.Page.IndexView.getInstance();