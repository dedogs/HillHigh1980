var GScope;(function(n){var t;(function(t){var i=function(){function t(){var i=this;this._locationId=0;this.showFields=function(){i.mapped["$"+t.ElementIds.City].show();i.mapped["$"+t.ElementIds.State].show();i.mapped["$"+t.ElementIds.Country].show();i.mapped["$"+t.ElementIds.RosterCityStaticName].hide();i.mapped["$"+t.ElementIds.RosterStateStaticName].hide();i.mapped["$"+t.ElementIds.RosterCountryStaticName].hide()};this.hideFields=function(){i.mapped["$"+t.ElementIds.City].hide();i.mapped["$"+t.ElementIds.State].hide();i.mapped["$"+t.ElementIds.Country].hide();i.mapped["$"+t.ElementIds.RosterCityStaticName].show();i.mapped["$"+t.ElementIds.RosterStateStaticName].show();i.mapped["$"+t.ElementIds.RosterCountryStaticName].show()};this.setValue=function(n){i.mapped[t.ElementIds.City].value=n[0];i.mapped[t.ElementIds.State].value=n[1];i.mapped[t.ElementIds.Country].value=n[2]};this.appendHTML=function(n){i.mapped[t.ElementIds.RosterCityStaticName].innerHTML=n[0];i.mapped[t.ElementIds.RosterStateStaticName].innerHTML=n[1];i.mapped[t.ElementIds.RosterCountryStaticName].innerHTML=n[2]};this.detailsLocations=function(r){var o=r.target,e,f=["","","United States"],u=["Add","Edit","Remove"].filter(function(n){return o.className.lastIndexOf(n)!==-1})[0];n.Utility.is(u).undef().ok()||(i.mapped["$"+t.ElementIds.DetailsForm].show(),i.mapped["$"+t.ElementIds.SubmitLocation].removeClass("btn-outline-danger btn-outline-dark").html(u+" Location >>"),i.mapped["$"+t.ElementIds.DetailsFormTitle].removeClass("text-danger").show(),u==="Add"?(i.showFields(),i.mapped[t.ElementIds.DetailsFormTitle].innerHTML=t.FormMessages.Add,i._currentAction=t.Action.add,i._locationId=0,i.setValue(f)):(e=$(o).parent().get(0),f=e.getAttribute("data-cityState").split(","),i._locationId=parseInt(e.id),u==="Edit"?(i.showFields(),i._currentAction=t.Action.edit,i.mapped[t.ElementIds.DetailsFormTitle].innerHTML=t.FormMessages.Edit,i.setValue(f)):u==="Remove"&&(i.mapped["$"+t.ElementIds.SubmitLocation].addClass("btn-outline-danger"),i.hideFields(),i._currentAction=t.Action.remove,i.mapped["$"+t.ElementIds.DetailsFormTitle].addClass("text-danger"),i.mapped[t.ElementIds.DetailsFormTitle].innerHTML=t.FormMessages.Remove,i.appendHTML(f))))};this.closeUpdateForm=function(){i.mapped["$"+t.ElementIds.DetailsForm].hide()};this.submitLocation=function(){var r=new n.Entity.Location;r.LocationId=i._locationId;r.City=i.mapped[t.ElementIds.City].value;r.State=i.mapped[t.ElementIds.State].value;r.Country=i.mapped[t.ElementIds.Country].value;r.RosterId=i.mapped[t.ElementIds.RosterId].getAttribute("data-rosterId");i.mapped["$"+t.ElementIds.DetailsForm].hide();i._currentAction===t.Action.add?i._service.CreateRosterLocations(r).then(function(n){i.mapped[t.ElementIds.DetailsLocations].innerHTML=n}).catch(function(n){console.error(n.statusText+" >> "+n.responseText)}):i._currentAction===t.Action.remove?i._service.DeleteRosterLocation(r).then(function(n){i.mapped[t.ElementIds.DetailsLocations].innerHTML=n}).catch(function(){}):i._service.UpdateRosterLocation(r).then(function(n){i.mapped[t.ElementIds.DetailsLocations].innerHTML=n}).catch(function(){})};this.manager=new n.Module.EventManager(this);this._service=new n.ApplicationService.Service.RosterService(new n.Infrastructure.RosterRepository);this.mapped=function(){return n.Module.MappedIds.get([{key:t.ElementIds.City,value:t.ElementIds.City},{key:t.ElementIds.State,value:t.ElementIds.State},{key:t.ElementIds.Country,value:t.ElementIds.Country},{key:t.ElementIds.SubmitLocation,value:t.ElementIds.SubmitLocation},{key:t.ElementIds.DetailsLocations,value:t.ElementIds.DetailsLocations},{key:t.ElementIds.DetailsFormTitle,value:t.ElementIds.DetailsFormTitle},{key:t.ElementIds.RosterId,value:t.ElementIds.RosterId},{key:t.ElementIds.DetailsForm,value:t.ElementIds.DetailsForm},{key:t.ElementIds.CloseUpdateForm,value:t.ElementIds.CloseUpdateForm},{key:t.ElementIds.RosterCityStaticName,value:t.ElementIds.RosterCityStaticName},{key:t.ElementIds.RosterStateStaticName,value:t.ElementIds.RosterStateStaticName},{key:t.ElementIds.RosterCountryStaticName,value:t.ElementIds.RosterCountryStaticName}])}();this.manager.add([new n.Module.EventManager.EventAction(t.ElementIds.SubmitLocation,this.mapped[t.ElementIds.SubmitLocation],"click")]);this.manager.add([new n.Module.EventManager.EventAction(t.ElementIds.SubmitLocation,this.mapped[t.ElementIds.DetailsLocations],"click")]);this.manager.add([new n.Module.EventManager.EventAction(t.ElementIds.SubmitLocation,this.mapped[t.ElementIds.CloseUpdateForm],"click")]);this.manager.attach();this.mapped["$"+t.ElementIds.DetailsForm].hide()}return t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t}();t.DetailsView=i,function(n){var t,i,r;(function(n){n.City="rosterCity";n.State="rosterState";n.Country="rosterCountry";n.SubmitLocation="submitLocation";n.DetailsLocations="detailsLocations";n.DetailsFormTitle="detailsFormTitle";n.RosterId="rosterId";n.DetailsForm="detailsForm";n.CloseUpdateForm="closeUpdateForm";n.RosterCityStaticName="rosterCityStaticName";n.RosterStateStaticName="rosterStateStaticName";n.RosterCountryStaticName="rosterCountryStaticName"})(t=n.ElementIds||(n.ElementIds={})),function(n){n[n.add=0]="add";n[n.remove=1]="remove";n[n.edit=2]="edit"}(i=n.Action||(n.Action={})),function(n){n.Add="Add Current and past places lived";n.Remove="Remove Roster's Location";n.Edit="Edit Roster's Location"}(r=n.FormMessages||(n.FormMessages={}))}(i=t.DetailsView||(t.DetailsView={}))})(t=n.Page||(n.Page={}))})(GScope||(GScope={}));GScope.Page.DetailsView.getInstance();