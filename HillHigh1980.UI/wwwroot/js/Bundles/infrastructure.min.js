var GScope;(function(n){var t;(function(n){var t=function(){function n(n){var t=this;this._RequestVerificationToken="__RequestVerificationToken";this.value=function(){return $("input[name='"+t._RequestVerificationToken+"']")[0].value};this._headerName=n||"RequestVerificationToken"}return Object.defineProperty(n.prototype,"RequestVerificationToken",{get:function(){return this._RequestVerificationToken},set:function(n){this._RequestVerificationToken=n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"HeaderName",{get:function(){return this._headerName},set:function(n){this._headerName=n},enumerable:!0,configurable:!0}),n}();n.Antiforgery=t})(t=n.Infrastructure||(n.Infrastructure={}))})(GScope||(GScope={})),function(n){var t;(function(n){var t=function(){function t(){this.setAntiforgery=function(){var t=new n.Antiforgery("XSRF-Token"),i={};return i[t.HeaderName]=t.value(),i};this.GetGPS=function(n){return $.ajax({dataType:"json",url:"http://dev.virtualearth.net/REST/v1/Locations?countryRegion="+n.Country+"&adminDistrict="+n.State+"&locality="+n.City+"&key=An9kkg2bad9Hot2soadq7tL_NllNH7d_PvWUUUtbGyxCWjiBFmPeChD0Ec8FbmyZ",method:"GET",cache:!1}).then(function(t){return n.Latitude=t.resourceSets[0].resources[0].point.coordinates[0],n.Longitude=t.resourceSets[0].resources[0].point.coordinates[1],n})};this.PartialViewById=function(n){return $.ajax({dataType:"html",url:"/Roster/Index/"+n,method:"GET",cache:!1})}}return t.prototype.FindByName=function(n){var t={};return Object.keys(n).forEach(function(i){t[i]=n[i]}),$.ajax({dataType:"html",url:"/Roster/Search",data:t,method:"GET",cache:!1})},t.prototype.ReadAll=function(){return $.ajax({dataType:"json",url:"/api/Roster",method:"GET",cache:!1})},t.prototype.FindById=function(n){return $.ajax({dataType:"json",url:"/api/Roster/"+n,method:"GET",cache:!1})},t.prototype.CreateLocations=function(n){var t=this;return this.GetGPS(n).then(function(n){return $.ajax({headers:t.setAntiforgery(),dataType:"json",contentType:"application/json",url:"/api/Locations",data:JSON.stringify(n),method:"Post",cache:!1}).then(function(n){return t.PartialViewById(n.rosterId)})})},t.prototype.UpdateLocation=function(n){var t=this;return $.ajax({headers:this.setAntiforgery(),dataType:"json",contentType:"application/json",url:"/api/Locations/"+n.LocationId,data:JSON.stringify(n),method:"PUT",cache:!1}).then(function(n){return t.PartialViewById(n.rosterId)})},t.prototype.DeleteLocation=function(n){var t=this;return $.ajax({headers:this.setAntiforgery(),dataType:"json",contentType:"application/json",url:"/api/Locations/"+n.LocationId,data:JSON.stringify(n),method:"DELETE",cache:!1}).then(function(n){return t.PartialViewById(n.rosterId)})},t}();n.RosterRepository=t})(t=n.Infrastructure||(n.Infrastructure={}))}(GScope||(GScope={}));